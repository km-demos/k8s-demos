kind: VirtualClusterTemplate
apiVersion: management.loft.sh/v1
metadata:
  name: preview-template
spec:
  displayName: preview-template
  owner:
    user: admin
  template:
    metadata:
      labels:
        loft.sh/import-argocd: 'true'
      annotations:
        sleepmode.loft.sh/delete-after: '72000'
        sleepmode.loft.sh/sleep-after: '6000'
    access:
      rules:
        - users:
            - admin
          clusterRole: cluster-admin
    helmRelease:
      chart: {}
      values: |-
        sync:
          ingresses:
            enabled: true
        isolation:
          enabled: true
          networkPolicy:
            enabled: false
        plugin:
          cert-manager-plugin:
            image: ghcr.io/loft-sh/vcluster-plugins/cert-manager-plugin:0.3.0
            imagePullPolicy: IfNotPresent
            rbac:
              role:
                extraRules:
                  - apiGroups: ["cert-manager.io"]
                    resources: ["issuers", "certificates"]
                    verbs: ["create", "delete", "patch", "update", "get", "list", "watch"]
              clusterRole:
                extraRules:
                  - apiGroups: ["apiextensions.k8s.io"]
                    resources: ["customresourcedefinitions"]
                    verbs: ["get", "list", "watch"]
    accessPoint:
      ingress: {}
    spaceTemplate:
      metadata: {}
  access:
    - verbs:
        - '*'
      subresources:
        - '*'
      users:
        - admin