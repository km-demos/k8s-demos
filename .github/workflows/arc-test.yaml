name: Actions Runner Controller Demo
on:
  workflow_dispatch:
    inputs:
      loft-cli-version:
        description: 'Loft CLI version to use'
        default: "v3.2.4"

env:
  LOFT_CLI_VERSION: ${{ inputs.loft-cli-version || 'v3.2.4' }}

jobs:
  Explore-GitHub-Actions:
    # You need to use the INSTALLATION_NAME from the previous step
    runs-on: arc-runner-set
    steps:
    - run: echo "Meg is awesome ðŸŽ‰ This job uses runner scale set runners!"

    - name: Install Loft CLI
      uses: loft-sh/setup-loft@v2
      with:
        version: ${{ env.LOFT_CLI_VERSION }}
        url: loft.loft.svc.cluster.local
        insecure: true
        # Specify your Loft access key here
        access-key: ${{ secrets.KUBEPI_LOFT_ACCESS_KEY }}

    - name: Loft Use Cluster
      run: |
        loft use cluster loft-cluster
        kubectl get pods -A

